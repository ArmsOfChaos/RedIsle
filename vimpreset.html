<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>nvim://start</title>
<style>
  body {
    background:#0f1117;
    color:#cdd6f4;
    margin:0;
    font-family: "Fira Code", monospace;
    font-size:15px;
    line-height:1.5;
  }
  #screen {
    padding:20px;
    height:100vh;
    box-sizing:border-box;
    display:flex;
    flex-direction:column;
  }
  .output {
    flex:1;
    overflow:auto;
    white-space:pre-wrap;
  }
  .prompt {
    display:flex;
  }
  .prompt span {
    color:#89b4fa;
  }
  .input {
    flex:1;
    background:transparent;
    border:0;
    color:#cdd6f4;
    font:inherit;
    outline:none;
  }
  .statusline {
    background:#1e1e2e;
    color:#a6adc8;
    padding:2px 8px;
    font-size:13px;
    display:flex;
    justify-content:space-between;
  }
  .hl-comment { color:#6c7086; }
  .hl-key { color:#f38ba8; }
  .hl-value { color:#fab387; }
</style>
</head>
<body>
<div id="screen">
  <div class="output" id="output">
    <span class="hl-comment">" Neovim start buffer — type :help for commands"</span>
    <br>
  </div>
  <div class="prompt">
    <span>:</span>
    <input class="input" id="input" autofocus spellcheck="false" autocomplete="off">
  </div>
  <div class="statusline">
    <div id="mode">NORMAL</div>
    <div>0:0 | utf-8 | startpage</div>
  </div>
</div>
<script>
const input = document.getElementById('input');
const output = document.getElementById('output');
const mode = document.getElementById('mode');

const bookmarks = {
  "Media": [
    {title:"YT", url:"https://www.youtube.com/"},
    {title:"YT Music", url:"https://music.youtube.com/"},
    {title:"Spotify", url:"https://open.spotify.com/"},
    {title:"Pinterest", url:"https://www.pinterest.com/"},
  ],
  "Communication": [
    {title:"Discord", url:"https://discord.com/"},
  ],
  "Gaming": [
    {title:"Roblox", url:"https://www.roblox.com/"},
    {title:"Activision", url:"https://www.activision.com/"},
  ],
  "Tools": [
    {title:"ChatGPT", url:"https://chat.openai.com/"},
    {title:"VirusTotal", url:"https://www.virustotal.com/"},
    {title:"GitHub", url:"https://github.com/"},
    {title:"Discord Dev Portal", url:"https://discord.com/developers"},
  ],
  "Shopping": [
    {title:"eBay", url:"https://www.ebay.com/"},
    {title:"Amazon", url:"https://www.amazon.com/"},
    {title:"Chrome Store", url:"https://chrome.google.com/webstore"},
  ]
};

function echo(line){ 
  output.innerHTML += line + "\n"; 
  output.scrollTop = output.scrollHeight; 
}

function showBookmarks(){
  for(const [group, items] of Object.entries(bookmarks)){
    echo(group+":");
    items.forEach((b,i)=>{
      echo("  ["+i+"] "+b.title+" <"+b.url+">");
    });
  }
}

function run(cmd){
  if(cmd==="help"){
    echo(":help                  show this help");
    echo(":ls                    list bookmarks by category");
    echo(":open <Cat> <Num>      open by category + index");
    echo(":open >Name            open by name (shortcut)");
    echo(":open URL              open arbitrary URL");
    echo(":q                     (disabled)");
    return;
  }
  if(cmd==="ls"){ showBookmarks(); return; }
  if(cmd==="q" || cmd==="quit"){ echo('" You can’t quit the void.'); return; }

  if(cmd.startsWith("open ")){
    const arg = cmd.slice(5).trim();
    if(arg.startsWith(">")){ // by name
      const name = arg.slice(1).toLowerCase();
      for(const items of Object.values(bookmarks)){
        for(const b of items){
          if(b.title.toLowerCase() === name){
            window.location.href = b.url; return;
          }
        }
      }
      echo('" No bookmark named '+name);
      return;
    }
    const parts = arg.split(" ");
    if(parts.length === 2){ // category + index
      const [cat, idxStr] = parts;
      const idx = Number(idxStr);
      const items = bookmarks[cat];
      if(items && items[idx]){ window.location.href = items[idx].url; return; }
      echo('" Not found: '+cat+" "+idxStr);
      return;
    }
    // otherwise assume raw URL
    let url = arg;
    if(!/^https?:/.test(url)) url = "https://"+url;
    window.location.href = url;
    return;
  }

  echo('" Unknown command: '+cmd);
}

input.addEventListener('keydown', e=>{
  if(e.key === "Enter"){
    const cmd = input.value.trim();
    echo(":"+cmd);
    run(cmd);
    input.value="";
  }
  if(e.key === "Escape"){
    mode.textContent = "NORMAL";
  }
  if(e.key === "i"){
    mode.textContent = "INSERT";
  }
});
</script>
</body>
</html>
